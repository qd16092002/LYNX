<div class="h100" style="
    min-height: 100vh !important;
    width: 100%;
    margin: auto;
    color: white;
    font-family: sans-serif;
    margin-top: -13px;
  " id="parent">
    <!-- Main Container with 2 columns -->
    <div style="
      display: flex;
      gap: 20px;
      height: calc(100vh - 20px);
    ">
        <!-- LEFT SIDE: Live Notifications -->
        <div style="
        flex: 1;
        display: flex;
        flex-direction: column;
        background: #2c2f33;
        border-radius: 8px;
        padding: 15px;
      ">
            <!-- Left Side Header -->
            <div style="
          display: flex;
          align-items: center;
          gap: 10px;
          margin-bottom: 15px;
          padding: 10px;
          background: #36393f;
          border-radius: 8px;
        ">
                <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                >
                    <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                </svg>
                <span style="font-weight: bold; color: #fff;">Live Notifications</span>
                <span style="color: #3498db; font-weight: bold;" ng-bind="liveNotificationsSize"></span>
            </div>
            <!-- Left Side Toolbar -->
            <div style="
          display: flex;
          align-items: center;
          gap: 10px;
          background: #363d3f;
          padding: 10px;
          border-radius: 8px;
          margin-bottom: 15px;
        ">
                <input
                    type="text"
                    ng-model="liveSearchQuery"
                    placeholder="Filter live notifications..."
                    style="
              flex: 1;
              background: #fff;
              color: #222;
              border: none;
              border-radius: 4px;
              padding: 8px;
            "
                >
                <button ng-click="refreshLiveNotifications()" style="
            background: #3498db;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
          ">
                    <svg
                        width="14"
                        height="14"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                    >
                        <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                    </svg>
                    Refresh
                </button>
                <button ng-click="clearLiveNotifications()" style="
            background: #e74c3c;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
          ">
                    <svg
                        width="14"
                        height="14"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                    >
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                    </svg>
                    Clear
                </button>
                <button ng-click="saveLiveNotifications()" style="
            background: #27ae60;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
          ">
                    <svg
                        width="14"
                        height="14"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                    >
                        <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                    </svg>
                    Save
                </button>
            </div>
            <!-- Left Side Notifications List -->
            <div infinite-scroll="increaseLiveLimit()" infinite-scroll-container='"#parent"' style="
          flex: 1;
          overflow-y: auto;
          background-color: #36393f;
          border-radius: 8px;
          padding: 10px;
        ">
                <!-- Empty state for live notifications -->
                <div ng-if="(liveNotificationsList | filter:liveSearchFilter).length === 0" style="text-align: center; padding: 40px; color: #888">
                    <svg
                        width="48"
                        height="48"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        style="margin-bottom: 15px"
                    >
                        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                    </svg>
                    <h4>No live notifications</h4>
                    <p>Click Refresh to get current notifications</p>
                </div>
                <!-- Live notifications table -->
                <table class="ui very compact striped table full" style="
            width: 100%;
            table-layout: fixed;
            background-color: #36393f;
            color: white;
            border-collapse: collapse;
          ">
                    <tbody>
                        <tr ng-repeat="notification in liveNotificationsList | filter:liveSearchFilter | limitTo:liveBarLimit" style="
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: stretch;
                background-color: #5a5e63;
                border-radius: 8px;
                margin-bottom: 8px;
              ">
                            <!-- App + Time -->
                            <td style="
                  width: 35%;
                  padding: 8px;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                ">
                                <img
                                    ng-if="notification.appIcon"
                                    ng-src="data:image/png;base64,{{notification.appIcon}}"
                                    style="width: 28px; height: 28px; border-radius: 4px"
                                    onerror="this.style.display='none'"
                                    alt="App icon"
                                >
                                <div ng-if="!notification.appIcon" style="
                    width: 28px;
                    height: 28px;
                    background-color: #3498db;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-weight: bold;
                    font-size: 12px;
                  ">
                                    {{(notification.packageName || '?').charAt(0).toUpperCase()}}
                                </div>
                                <div style="display: flex; flex-direction: column">
                                    <strong style="color: #fff; font-size: 12px" ng-bind="notification.appName || notification.packageName"></strong>
                                    <span style="color: #ccc; font-size: 10px" ng-if="notification.postTime">
                                        {{ notification.postTime | date:'HH:mm:ss' }}
                                    </span>
                                </div>
                            </td>
                            <!-- Content -->
                            <td style="
                  width: 45%;
                  padding: 8px;
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
                ">
                                <div ng-if="notification.title" style="margin-bottom: 4px">
                                    <strong style="color: #fff; font-size: 11px" ng-bind="notification.title"></strong>
                                </div>
                                <div ng-if="notification.bigText" style="
                    color: #bbb;
                    font-size: 10px;
                    line-height: 1.2;
                    background-color: #4a4e52;
                    padding: 6px;
                    border-radius: 3px;
                    margin-bottom: 4px;
                  " ng-bind="notification.bigText"></div>
                                <div ng-if="notification.subText" style="color: #999; font-size: 10px; font-style: italic" ng-bind="notification.subText"></div>
                            </td>
                            <!-- Actions -->
                            <td style="
                  width: 20%;
                  padding: 8px;
                  display: flex;
                  flex-direction: column;
                  justify-content: space-between;
                  align-items: flex-end;
                  gap: 6px;
                ">
                                <div style="color: #888; font-size: 9px; text-align: right">
                                    <strong>ID:</strong>
                                    {{notification.notificationId}}
                                </div>
                                <button ng-click="clearSingleLiveNotification(notification.notificationKey)" ng-disabled="!notification.isClearable" style="
                    background-color: #e74c3c;
                    color: white;
                    border: none;
                    padding: 4px 8px;
                    border-radius: 3px;
                    cursor: pointer;
                    font-size: 10px;
                    display: flex;
                    align-items: center;
                    gap: 3px;
                  ">
                                    <svg
                                        width="10"
                                        height="10"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                    >
                                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                    </svg>
                                    Clear
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- RIGHT SIDE: All Stored Notifications -->
        <div style="
        flex: 1;
        display: flex;
        flex-direction: column;
        background: #2c2f33;
        border-radius: 8px;
        padding: 15px;
      ">
            <!-- Right Side Header -->
            <div style="
          display: flex;
          align-items: center;
          gap: 10px;
          margin-bottom: 15px;
          padding: 10px;
          background: #36393f;
          border-radius: 8px;
        ">
                <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                >
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
                <span style="font-weight: bold; color: #fff;">All Stored Notifications</span>
                <span style="color: #f39c12; font-weight: bold;" ng-bind="allNotificationsSize"></span>
            </div>
            <!-- Right Side Toolbar -->
            <div style="
          display: flex;
          align-items: center;
          gap: 10px;
          background: #363d3f;
          padding: 10px;
          border-radius: 8px;
          margin-bottom: 15px;
        ">
                <input
                    type="text"
                    ng-model="allSearchQuery"
                    placeholder="Filter all notifications..."
                    style="
              flex: 1;
              background: #fff;
              color: #222;
              border: none;
              border-radius: 4px;
              padding: 8px;
            "
                >
                <button ng-click="clearAllStoredNotifications()" style="
            background: #e74c3c;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
          ">
                    <svg
                        width="14"
                        height="14"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                    >
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                    </svg>
                    Clear All
                </button>
                <button ng-click="saveAllNotifications()" style="
            background: #27ae60;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
          ">
                    <svg
                        width="14"
                        height="14"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                    >
                        <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                    </svg>
                    Save
                </button>
            </div>
            <!-- Right Side Notifications List -->
            <div infinite-scroll="increaseAllLimit()" infinite-scroll-container='"#parent"' style="
          flex: 1;
          overflow-y: auto;
          background-color: #36393f;
          border-radius: 8px;
          padding: 10px;
        ">
                <!-- Empty state for all notifications -->
                <div ng-if="(allNotificationsList | filter:allSearchFilter).length === 0" style="text-align: center; padding: 40px; color: #888">
                    <svg
                        width="48"
                        height="48"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        style="margin-bottom: 15px"
                    >
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                    </svg>
                    <h4>No stored notifications</h4>
                    <p>Notifications will be stored here automatically</p>
                </div>
                <!-- All notifications table -->
                <table class="ui very compact striped table full" style="
            width: 100%;
            table-layout: fixed;
            background-color: #36393f;
            color: white;
            border-collapse: collapse;
          ">
                    <tbody>
                        <tr ng-repeat="notification in allNotificationsList | filter:allSearchFilter | limitTo:allBarLimit" style="
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: stretch;
                background-color: #5a5e63;
                border-radius: 8px;
                margin-bottom: 8px;
              ">
                            <!-- App + Time -->
                            <td style="
                  width: 35%;
                  padding: 8px;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                ">
                                <img
                                    ng-if="notification.appIcon"
                                    ng-src="data:image/png;base64,{{notification.appIcon}}"
                                    style="width: 28px; height: 28px; border-radius: 4px"
                                    onerror="this.style.display='none'"
                                    alt="App icon"
                                >
                                <div ng-if="!notification.appIcon" style="
                    width: 28px;
                    height: 28px;
                    background-color: #f39c12;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-weight: bold;
                    font-size: 12px;
                  ">
                                    {{(notification.packageName || '?').charAt(0).toUpperCase()}}
                                </div>
                                <div style="display: flex; flex-direction: column">
                                    <strong style="color: #fff; font-size: 12px" ng-bind="notification.appName || notification.packageName"></strong>
                                    <span style="color: #ccc; font-size: 10px" ng-if="notification.postTime">
                                        {{ notification.postTime | date:'dd/MM HH:mm:ss' }}
                                    </span>
                                    <span style="color: #f39c12; font-size: 9px" ng-if="notification.storedTimestamp">
                                        Stored: {{ notification.storedTimestamp | date:'HH:mm:ss' }}
                                    </span>
                                </div>
                            </td>
                            <!-- Content -->
                            <td style="
                  width: 45%;
                  padding: 8px;
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
                ">
                                <div ng-if="notification.title" style="margin-bottom: 4px">
                                    <strong style="color: #fff; font-size: 11px" ng-bind="notification.title"></strong>
                                </div>
                                <div ng-if="notification.bigText" style="
                    color: #bbb;
                    font-size: 10px;
                    line-height: 1.2;
                    background-color: #4a4e52;
                    padding: 6px;
                    border-radius: 3px;
                    margin-bottom: 4px;
                  " ng-bind="notification.bigText"></div>
                                <div ng-if="notification.subText" style="color: #999; font-size: 10px; font-style: italic" ng-bind="notification.subText"></div>
                                <div ng-if="notification.tickerText" style="
                    color: #888;
                    font-size: 9px;
                    margin-top: 4px;
                    padding: 4px;
                    background-color: #4a4e52;
                    border-radius: 3px;
                  " ng-bind="notification.tickerText"></div>
                            </td>
                            <!-- Meta Info -->
                            <td style="
                  width: 20%;
                  padding: 8px;
                  display: flex;
                  flex-direction: column;
                  justify-content: space-between;
                  align-items: flex-end;
                  gap: 6px;
                ">
                                <!-- <div style="color: #888; font-size: 9px; text-align: right">
                                    <strong>ID:</strong>
                                    {{notification.notificationId}}
                                    <br>
                                    <strong>Key:</strong>
                                    {{notification.notificationKey}}
                                </div> -->
                                <div ng-if="notification.isOngoing" style="
                    background-color: #f39c12;
                    color: white;
                    padding: 2px 6px;
                    border-radius: 3px;
                    font-size: 9px;
                  ">
                                    ONGOING
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
